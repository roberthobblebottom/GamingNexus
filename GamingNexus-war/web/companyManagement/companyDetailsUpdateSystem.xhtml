<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                template="/template/defaultTemplate.xhtml"
                xmlns:ez="http://xmlns.jcp.org/jsf/composite/ezcomp"
                xmlns:p="http://primefaces.org/ui"
                >

    <ui:define name="content">
        <h3>Company Details Update</h3>

        <p:messages id="messages" redisplay="false" closable="true"/>
        <h:form id="formCompanyDetailsUpdate">
            <p:panelGrid>
                <p:row>
                    <p:column>
                        <p:outputLabel for="username" value="Username" style="font-weight: bold;"/>               
                    </p:column>
                    <p:column>
                        <p:inputText id="username" value="#{companyDetailsUpdateSystem.company.username}" placeholder="username" 
                                     required="true" requiredMessage="Username is required" >
                            <f:validateLength minimum="1" maximum="100">
                                <p:ajax event="keyup" update="usernameValidation" process="@this"/> 
                            </f:validateLength>
                        </p:inputText>
                    </p:column>
                    <p:column>
                        <p:messages id="usernameValidation" for ="username" />
                    </p:column>     
                </p:row>

                <p:row>
                    <p:column>
                        <p:outputLabel for="phoneNumber" value="Phone Number" style="font-weight: bold;"/>               
                    </p:column>
                    <p:column>
                        <p:inputText id="phoneNumber" value="#{companyDetailsUpdateSystem.company.phoneNumber}" placeholder="Phone Number" 
                                     required="true" requiredMessage="Phonenumber is required" >
                            <f:validateDoubleRange minimum="0" maximum="99999999999999">
                                <p:ajax event="keyup" update="phoneNumberValidation" process="@this"/> 
                            </f:validateDoubleRange>
                        </p:inputText>
                    </p:column>
                    <p:column>
                        <p:messages id="phoneNumberValidation" for ="phoneNumber" />
                    </p:column>     
                </p:row>

                <p:row>
                    <p:column>
                        <p:outputLabel for="address" value="Address" style="font-weight: bold;"/>               
                    </p:column>
                    <p:column>
                        <p:inputText id="address" value="#{companyDetailsUpdateSystem.company.address}" placeholder="Address" 
                                     required="true" requiredMessage="Address is required" >
                            <f:validateLength minimum="5" maximum="200">
                                <p:ajax event="keyup" update="addressValidation" process="@this"/> 
                            </f:validateLength>
                        </p:inputText>
                    </p:column>
                    <p:column>
                        <p:messages id="addressValidation" for ="address" />
                    </p:column>     
                </p:row>
                <p:row>
                    <p:column>
                        <p:outputLabel for="email" value="Email" style="font-weight: bold;"/>               
                    </p:column>
                    <p:column>
                        <p:inputText id="email" value="#{companyDetailsUpdateSystem.company.email}" placeholder="Email" 
                                     required="true" requiredMessage="Email is required" >
                            <f:validateLength minimum="6" maximum="100">
                            </f:validateLength>
                            <f:validateRegex pattern="([^.@]+)(\.[^.@]+)*@([^.@]+\.)+([^.@]+)"  >
                            </f:validateRegex>
                            <p:ajax event="keyup" update="emailValidation" process="@this"/> 

                        </p:inputText>
                    </p:column>
                    <p:column>
                        <p:messages id="emailValidation" for ="email" />
                    </p:column>     
                </p:row>
                <p:row>
                    <p:column>
                        <p:outputLabel for="country" value="Country" style="font-weight: bold;"/>               
                    </p:column>
                    <p:column>
                        <p:inputText id="country" value="#{companyDetailsUpdateSystem.company.country}" placeholder="country" 
                                     required="true" requiredMessage="Address is required" >
                            <f:validateLength minimum="1" maximum="50">
                                <p:ajax event="keyup" update="countryValidation" process="@this"/> 
                            </f:validateLength>
                        </p:inputText>
                    </p:column>
                    <p:column>
                        <p:messages id="countryValidation" for ="country" />
                    </p:column>     
                </p:row>

                <p:row>
                    <p:column>
                        <p:outputLabel for="oldPassword" value="Old Password" style="font-weight: bold;"/>               
                    </p:column>
                    <p:column>
                        <p:password id="oldPassword" value="#{companyDetailsUpdateSystem.oldPassword}" 
                                    required="true" requiredMessage="old password  is required" >
                            <f:validateLength minimum="6" >
                                <p:ajax event="keyup" update="oldPasswordValidation" process="@this" /> 
                            </f:validateLength>
                        </p:password>
                    </p:column>
                    <p:column>
                        <p:messages id="oldPasswordValidation" for ="oldPassword" />
                    </p:column>     
                </p:row>


                <p:row>
                    <p:column>
                        <p:outputLabel for="newPassword" value="New Password" style="font-weight: bold;"/>               
                    </p:column>
                    <p:column>
                        <p:password id="newPassword" value="#{companyDetailsUpdateSystem.newPassword}"    
                                    feedback="true" inline="true" 
                                    >
                            <f:validateLength minimum="6" />
                            <p:ajax event="keyup" update="reenterNewPasswordValidation" /> 

                        </p:password>
                    </p:column>
                    <p:column>
                        <p:messages id="newPasswordValidation" for ="newPassword" />
                    </p:column>     
                </p:row>

                <p:row>
                    <p:column>
                        <p:outputLabel for="reenterNewPassword" value="Reenter New Password" style="font-weight: bold;"/>               
                    </p:column>
                    <p:column>
                        <p:password id="reenterNewPassword" value="#{companyDetailsUpdateSystem.newPassword}" 
                                     >
                        </p:password>
                        match="newPassword"
                                    validatorMessage="the reentered new password needs to be equal to the new Password"
                    </p:column>
                    <p:column>
                        <p:messages id="reenterNewPasswordValidation" for ="reenterNewPassword" />
                    </p:column>     
                </p:row>



                <p:row>
                    <p:column colspan="3">
                        <p:commandButton  id="UpdateCompanyDetailsButton" value="Update" 
                                          update="@form formCompanyDetailsUpdate" process="@form formCompanyDetailsUpdate"
                                          actionListener="#{companyDetailsUpdateSystem.updateCompany}"    
                                          />
                    </p:column>
                </p:row>

            </p:panelGrid>

        </h:form>

    </ui:define>

</ui:composition>